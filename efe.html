<html>
	<head>
        <meta charset="UTF-8">
		<title>Einstein Field Equations</title>
		<script type="text/javascript" async src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
		<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});</script>
	</head>
	<body>

<b>ADM formalism of metric tensor:</b><br>

$g_{ab} = g_{ab}(\alpha, \beta^i, \gamma_{ij})$<br>
$[g_{uv}] = u(i)\downarrow \overset{v(j)\rightarrow}{\left[ \matrix{-\alpha^2 + \beta_k \beta^k & \beta_j \\ \beta_i & \gamma_{ij}} \right]}$<br>
$[g^{uv}] = u(i)\downarrow \overset{v(j)\rightarrow}{\left[ \matrix{-1/\alpha^2 & \beta^j / \alpha^2 \\ \beta^i / \alpha^2 & \gamma^{ij} - \beta^i \beta^j / \alpha^2} \right]}$<br>
<br>
Derivatives:<br>
$\frac{\partial}{\partial \alpha} [g_{uv}] = u(i)\downarrow\overset{v(j)\rightarrow}{\left[ \matrix{-2 \alpha & 0 \\ 0 & 0} \right]}$<br>
$\frac{\partial}{\partial \beta^m} [g_{uv}] = u(i)\downarrow \overset{v(j)\rightarrow}{\left[ \matrix{ 2 \beta_m & \gamma_{mj} \\ \gamma_{mi} & 0} \right]}$<br>
$\frac{\partial}{\partial \gamma_{mn}} [g_{uv}] = u(i)\downarrow \overset{v(j)\rightarrow}{\left[ \matrix{ \beta^m \beta^n & \beta^m \delta^j_n \\ \beta^m \delta^n_i & \delta^m_i \delta^n_j} \right]}$<br>
<br>

Derivative of inverse wrt metric:<br>
$\delta^b_a = g^{bc} g_{ca}$<br>
$0 = \partial \delta^b_a = \partial g^{bc} g_{ca} + g^{bc} \partial g_{ca}$<br>
$g^{bc} \partial g_{ca} = -\partial g^{bc} g_{ca}$<br>
$\partial g^{ab} = -g^{ac} \partial g_{cd} g^{db}$<br>
$\frac{\partial g^{ab}}{\partial g_{cd}} = -g^{ac} g^{db}$<br>
The index is correct for asymmetric $g_{ab}$.<br>
<br>

Derivative of determinant wrt metric, using Jacobi's formula:<br>
$\partial det A = tr(adj(A) \partial A) = det A \cdot tr(A^{-T} \partial A)$<br>
so $\frac{\partial g}{\partial g_{ef}} = g g^{ba} \frac{\partial g_{ab}}{\partial g_{ef}}$
$= g g^{fe}$<br>
<br>

<b>Levi-Civita tensor:</b><br>
$\bar\epsilon_{abcd} = $ permutation tensor of $abcd$ with weight of 1, raised/lowered by $\eta_{ab}$.<br>
<br>
$\epsilon_{abcd} = \sqrt{|det(g_{uv})|} \bar\epsilon_{abcd} = |det({e^a}_b)| \bar\epsilon_{abcd}$<br>
...where ${e^a}_b$ is the transformation from a locally-Minkowski basis to our manifold, such that $g_{ab} = \eta_{uv} {e^u}_a {e^v}_b$.<br>
$\epsilon^{abcd} = \frac{-1}{\sqrt{-g}} \bar\epsilon_{abcd}$<br>
<br>
Derivatives:<br>
$\frac{\epsilon_{abcd}}{\partial g_{ef}} = \frac{\partial \sqrt{-g}}{\partial g_{ef}} \bar\epsilon_{abcd}$<br>
$ = -\frac{1}{2 \sqrt{-g}} \frac{\partial det g}{\partial g_{ef}} \bar\epsilon_{abcd}$<br>
$ = -\frac{1}{2 \sqrt{-g}} g g^{fe} \bar\epsilon_{abcd}$<br>
$ = \frac{1}{2} \sqrt{-g} g^{fe} \bar\epsilon_{abcd}$<br>
<br>

<b>Metric derivative, discretized:</b><br>
1st order:<br>
$\frac{\partial}{\partial x} g_{ab}(x) \approx \frac{\partial g_{ab}(x)}{\partial x} = \frac{g_{ab}(x + \Delta \hat{x}^j) - g_{ab}(x - \Delta \hat{x}^j)}{2 \Delta}$<br>
<br>

Derivative wrt metric:<br>
$\frac{\partial}{\partial g_{ef}(x)} \frac{\partial g_{ab}(x)}{\partial x} = 0$<br>
$\frac{\partial}{\partial g_{ef}(x + \Delta \hat{x}^j)} \frac{\partial g_{ab}(x)}{\partial x} = \frac{1}{2} \delta^e_a \delta^f_b$<br>
$\frac{\partial}{\partial g_{ef}(x - \Delta \hat{x}^j)} \frac{\partial g_{ab}(x)}{\partial x} = -\frac{1}{2} \delta^e_a \delta^f_b$<br>
<br>

For 1st order spatial derivatives, $\frac{\partial}{\partial x} g_{ab}(x)$ references cells 1 cell away.<br>
<br>

<b>Christoffel symbols of the first kind:</b><br>
$\Gamma_{abc} = \frac{1}{2} (
	\frac{\partial}{\partial x^c} g_{ab} 
	+ \frac{\partial}{\partial x^b} g_{ac}
	- \frac{\partial}{\partial x^a} g_{bc})$<br>
<br>
Derivatives:<br>
$\frac{\partial}{\partial g_{ef}} \Gamma_{abc} =
	\frac{1}{2} (
		\frac{\partial}{\partial x^c} \frac{\partial}{\partial g_{ef}} g_{ab}
		+ \frac{\partial}{\partial x^b} \frac{\partial}{\partial g_{ef}} g_{ac}
		- \frac{\partial}{\partial x^a} \frac{\partial}{\partial g_{ef}} g_{bc}
	)$<br>
$= \frac{1}{2} (
		\frac{\partial}{\partial x^c} (\delta^e_a \delta^f_b)
		+ \frac{\partial}{\partial x^b} (\delta^e_a \delta^f_c)
		- \frac{\partial}{\partial x^a} (\delta^e_b \delta^f_c)
	)$<br>
$= 0$<br>
<br>

For 1st order spatial derivatives, $\Gamma_{abc}(x)$ references cells 1 cell away.<br>
<br>

Useful identity:<br>
$ \Gamma_{(ab)c} = {1 \over 2} (\Gamma_{abc} + \Gamma_{bac})$<br>
$	= {1 \over 4} (\frac{\partial}{\partial x^c} g_{ab} + \partial_b g_{ac} - \partial_a g_{bc} + \frac{\partial}{\partial x^c} g_{ba} + \partial_a g_{bc} - \partial_b g_{ac})$<br>
$	= {1 \over 4} (2 \frac{\partial}{\partial x^c} g_{ab})$<br>
$	= {1 \over 2} \frac{\partial}{\partial x^c} g_{ab} $<br>
so $\frac{\partial}{\partial x^c} g_{ab} = 2 \Gamma_{(ab)c}$<br>
<br>

Discretized:<br>
The spatial derivative sampling is only used when the indexes are spatial.  Otherwise, for time derivatives it falls back to $\frac{\partial}{\partial t}g_{uv}(x)$<br>
$\Gamma_{ttt}(x) 
	= \frac{1}{2} \frac{\partial}{\partial t} g_{tt}(x)$<br>
$\Gamma_{itt}(x) 
	= \frac{\partial}{\partial t} g_{it}(x) - \frac{1}{2} \frac{\partial}{\partial x^i} g_{tt}(x) 
	\approx \frac{\partial}{\partial t} g_{ti}(x) - \frac{1}{4 \Delta} ( g_{tt}(x + \Delta \hat{x}^i) - g_{tt}(x - \Delta \hat{x}^i) )$<br>
$\Gamma_{tit}(x) = \Gamma_{tti}(x) 
	= \frac{1}{2} ( g_{ti,t}(x) + g_{tt,i}(x) - g_{it,t}(x)) 
	= \frac{1}{2} g_{tt,i}(x) 
	\approx \frac{1}{4 \Delta} ( g_{tt}(x + \Delta \hat{x}^i) - g_{tt}(x - \Delta \hat{x}^i)  )$<br>
$\Gamma_{ijt}(x) = \Gamma_{itj}(x)
	= \frac{1}{2} ( g_{ij,t}(x) + g_{it,j}(x) - g_{jt,i}(x) )
	\approx \frac{1}{2} \frac{\partial}{\partial t} g_{ij}(x)
		+ \frac{1}{4 \Delta} \left(
			g_{ti}(x + \Delta \hat{x}^j) - g_{ti}(x - \Delta \hat{x}^j)
			- g_{tj}(x + \Delta \hat{x}^i) + g_{tj}(x - \Delta \hat{x}^i)
		\right)$<br>
$\Gamma_{tij}(x) = \frac{1}{2} (g_{ti,j}(x) + g_{tj,i}(x) - g_{ij,t}(x))
	\approx -\frac{1}{2} \frac{\partial}{\partial t} g_{ij}(x)
		+ \frac{1}{4 \Delta} \left(
			g_{ti}(x + \Delta \hat{x}^j) - g_{ti}(x - \Delta \hat{x}^j)
			+ g_{tj}(x + \Delta \hat{x}^i) - g_{tj}(x - \Delta \hat{x}^i)
		\right)$<br>
$\Gamma_{ijk}(x) = \frac{1}{2} (g_{ij,k}(x) + g_{ik,j}(x) - g_{jk,i}(x))
	\approx \frac{1}{4 \Delta} \left(
		g_{ij}(x + \Delta\hat{x}^k) - g_{ij}(x - \Delta\hat{x}^k)
		g_{ik}(x + \Delta\hat{x}^j) - g_{ik}(x - \Delta\hat{x}^j)
		g_{jk}(x + \Delta\hat{x}^i) - g_{jk}(x - \Delta\hat{x}^i)
	\right)$<br>
<br>

TODO decide from here on whether to work around the approx partial discretization spatial vs temporal, or to actually define each case.<br> 
<br>
Discretized derivatives:<br>
$\frac{\partial \Gamma_{abc}(x)}{\partial g_{ef}(x)} = 0$<br>
$\frac{\partial \Gamma_{abc}(x)}{\partial g_{ef}(x + \Delta \hat{x}^j)} = \frac{1}{4} (\delta^e_a \delta^f_b \delta^j_c + \delta^e_a \delta^f_c \delta^j_b - \delta^e_b \delta^f_c \delta^j_a)$<br>
$\frac{\partial \Gamma_{abc}(x)}{\partial g_{ef}(x - \Delta \hat{x}^j)} = -\frac{1}{4} (\delta^e_a \delta^f_b \delta^j_c + \delta^e_a \delta^f_c \delta^j_b - \delta^e_b \delta^f_c \delta^j_a)$<br>
<br>

For 1st order spatial derivatives, $\frac{\partial}{\partial g_{ef}} \Gamma_{abc}(x)$ references cells 1 cell away.<br>
<br>

<b>Christoffel symbols of the second kind:</b><br>
${\Gamma^a}_{bc} = g^{ad} \Gamma_{dbc}$<br>
<br>

Derivatives:<br>
$\frac{\partial}{\partial g_{ef}} {\Gamma^a}_{bc}
= \frac{\partial g^{ad}}{\partial g_{ef}} \Gamma_{dbc}
	+ g^{ad} \frac{\partial}{\partial g_{ef}} \Gamma_{dbc}$<br>
$ = -g^{ae} {\Gamma^f}_{bc}
	+ g^{ad} \frac{\partial}{\partial g_{ef}} \Gamma_{dbc}$<br>
$ = -g^{ae} {\Gamma^f}_{bc}$<br>
<br>

Discretized derivatives:<br>
$\frac{\partial}{\partial g_{ef}(x)} {\Gamma^a}_{bc}(x) = -g^{ae}(x) {\Gamma^f}_{bc}(x)$<br>
$\frac{\partial}{\partial g_{ef}(x + \Delta \hat{x}^j)} {\Gamma^a}_{bc}(x) 
= g^{ad}(x) \frac{\partial}{\partial g_{ef}(x + \Delta \hat{x}^j)} \Gamma_{dbc}(x)$<br>
$ = \frac{1}{4} g^{ad}(x) (\delta^e_d \delta^f_b \delta^j_c + \delta^e_d \delta^f_c \delta^j_b - \delta^e_b \delta^f_c \delta^j_d)$<br>
$ = \frac{1}{4} (g^{ae}(x) (\delta^f_b \delta^j_c + \delta^f_c \delta^j_b) - g^{aj}(x) \delta^e_b \delta^f_c)$<br>
$\frac{\partial}{\partial g_{ef}(x - \Delta \hat{x}^j)} {\Gamma^a}_{bc}(x) 
= -\frac{1}{4} (g^{ae}(x) (\delta^f_b \delta^j_c + \delta^f_c \delta^j_b) - g^{aj}(x) \delta^e_b \delta^f_c)$<br>
<br>
so:<br>
$\frac{\partial}{\partial g_{ef}(x)} {\Gamma^a}_{bc}(x) = -g^{ae}(x) {\Gamma^f}_{bc}(x)$<br>
$\frac{\partial}{\partial g_{ef}(x)} {\Gamma^a}_{bc}(x - \Delta \hat{x}^j) 
	= \frac{1}{4} (g^{ae}(x - \Delta \hat{x}^j) (\delta^f_b \delta^j_c + \delta^f_c \delta^j_b) - g^{aj}(x - \Delta \hat{x}^j) \delta^e_b \delta^f_c)$<br>
$\frac{\partial}{\partial g_{ef}(x)} {\Gamma^a}_{bc}(x + \Delta \hat{x}^j) 
	= -\frac{1}{4} (g^{ae}(x + \Delta \hat{x}^j) (\delta^f_b \delta^j_c + \delta^f_c \delta^j_b) - g^{aj}(x + \Delta \hat{x}^j) \delta^e_b \delta^f_c)$<br>
<br>
so, for contracting only the spatial terms of $c$:<br>
$\frac{\partial}{\partial g_{ef}(x + \Delta \hat{x}^j)} {\Gamma^a}_{bj}(x) 
 = \frac{1}{4} (g^{ae}(x) (\delta^f_b \delta^j_j + \delta^f_j \delta^j_b) - g^{aj}(x) \delta^e_b \delta^f_j)$<br>
$ = \frac{1}{4} (g^{ae}(x) (3 \delta^f_b + \delta^f_b) - g^{aj}(x) \delta^e_b \delta^f_j)$<br>
$ = g^{ae}(x) \delta^f_b - \frac{1}{4} g^{af}(x) \delta^e_b$<br>
$\frac{\partial}{\partial g_{ef}(x - \Delta \hat{x}^j)} {\Gamma^a}_{bj}(x) 
= -\frac{1}{4} (g^{ae}(x) (\delta^f_b \delta^j_j + \delta^f_j \delta^j_b) - g^{aj}(x) \delta^e_b \delta^f_j)$<br>
$= -g^{ae}(x) \delta^f_b + \frac{1}{4} g^{af}(x) \delta^e_b$<br>
<br>

then the full discretization of ${\Gamma^a}_{bc,c}(x)$ is...<br> 
${\Gamma^a}_{bt,t}(x) + {\Gamma^a}_{bj,j}(x)$<br>
$={\Gamma^a}_{bt,t}(x) + \frac{1}{2 \Delta} (
	{\Gamma^a}_{bj}(x + \Delta \hat{x}^j)
	- {\Gamma^a}_{bj}(x - \Delta \hat{x}^j)
)$<br>

<br>
For 1st order spatial derivatives, $\frac{\partial}{\partial g_{ef}} {\Gamma^a}_{bc}(x)$ references cells 1 cell away.<br>
<br>

<b>Riemann curvature:</b><br>
${R^a}_{bcd} = 2 (\frac{\partial}{\partial x^{[c}} {\Gamma^a}_{d]b} + {\Gamma^a}_{e[c} {\Gamma^e}_{d]b})$<br>
<br>
Expanded:<br>
${R^a}_{bcd} = {\Gamma^a}_{bd,c} - {\Gamma^a}_{bc,d} + {\Gamma^a}_{fc} {\Gamma^f}_{bd} - {\Gamma^a}_{fd} {\Gamma^f}_{bc}$<br>
$= (g^{ae} \Gamma_{ebd})_{,c} - (g^{ae} \Gamma_{ebc})_{,d} + g^{ae} g^{fg} \Gamma_{efc} \Gamma_{gbd} - g^{ae} g^{fg} \Gamma_{efd} \Gamma_{gbc}$<br>
$= {g^{ae}}_{,c} \Gamma_{ebd} + g^{ae} \Gamma_{ebd,c}
	- {g^{ae}}_{,d} \Gamma_{ebc} - g^{ae} \Gamma_{ebc,d}
	+ g^{ae} g^{fg} \Gamma_{efc} \Gamma_{gbd} 
	- g^{ae} g^{fg} \Gamma_{efd} \Gamma_{gbc}$<br>
$= \frac{1}{2} {g^{ae}}_{,c} (g_{eb,d} + g_{ed,b} - g_{bd,e})
	+ \frac{1}{2} g^{ae} (g_{eb,dc} + g_{ed,bc} - g_{bd,ec})
	- \frac{1}{2} {g^{ae}}_{,d} (g_{eb,c} + g_{ec,b} - g_{bc,e})
	- \frac{1}{2} g^{ae} (g_{eb,cd} + g_{ec,bd} - g_{bc,ed})$<br>
$	+ \frac{1}{4} g^{ae} g^{fg} (g_{ef,c} + g_{ec,f} - g_{fc,e}) (g_{gb,d} + g_{gd,b} - g_{bd,g})
	- \frac{1}{4} g^{ae} g^{fg} (g_{ef,d} + g_{ed,f} - g_{fd,e}) (g_{gb,c} + g_{gc,b} - g_{bc,g})
$<br>
$= 
	\frac{1}{2} g^{ae} (g_{de,bc} - g_{bd,ce} - g_{ce,bd} + g_{bc,de})
+ \frac{1}{4} g^{af} g^{ge} ($<br>
$	2 g_{fg,d} g_{eb,c} + 2 g_{fg,d} g_{ec,b} - 2 g_{fg,d} g_{bc,e}
	- 2 g_{fg,c} g_{eb,d} - 2 g_{fg,c} g_{ed,b} + 2 g_{fg,c} g_{bd,e}$<br>
$	+ g_{fg,c} g_{eb,d} + g_{fg,c} g_{ed,b} - g_{fg,c} g_{bd,e}
	+ g_{fc,g} g_{eb,d} + g_{fc,g} g_{ed,b} - g_{fc,g} g_{bd,e}
	- g_{gc,f} g_{eb,d} - g_{gc,f} g_{ed,b} + g_{gc,f} g_{bd,e}$<br>
$	- g_{fg,d} g_{eb,c} - g_{fg,d} g_{ec,b} + g_{fg,d} g_{bc,e}
	- g_{fd,g} g_{eb,c} - g_{fd,g} g_{ec,b} + g_{fd,g} g_{bc,e}
	+ g_{gd,f} g_{eb,c} + g_{gd,f} g_{ec,b} - g_{gd,f} g_{bc,e}
)
$<br>
$= \frac{1}{2} g^{ae} (g_{ed,bc} + g_{bc,ed} - g_{bd,ec} - g_{ec,bd})
+ \frac{1}{4} g^{af} g^{mn} (
	- g_{dn,b} g_{fm,c} 
	+ g_{cn,b} g_{fm,d} 
	+ g_{cn,b} g_{dm,f}
	- g_{dn,b} g_{cm,f}
	- g_{cn,b} g_{df,m}
	+ g_{dn,b} g_{cf,m}
	+ g_{bn,c} g_{fm,d} 
	+ g_{bn,c} g_{dm,f}
	- g_{fm,c} g_{bn,d} 
	- g_{bn,c} g_{df,m}
	+ g_{fm,c} g_{bd,n}
	- g_{bn,d} g_{cm,f}
	- g_{fm,d} g_{bc,n}
	+ g_{bn,d} g_{cf,m}
	+ g_{cm,f} g_{bd,n}
	- g_{dm,f} g_{bc,n}
	- g_{bd,n} g_{cf,m}
	+ g_{bc,n} g_{df,m}
)
$<br>
<br>

<b>Ricci curvature:</b><br>
$R_{ab} = {R^c}_{acd}$<br>
$= 2 ( \frac{\partial}{\partial x^{[c}} {\Gamma^c}_{b]a} + {\Gamma^c}_{d[c} {\Gamma^d}_{b]a} )$<br>
<br>

Expanded:<br>
$R_{ab} 
= \frac{1}{2} g^{fe} (g_{eb,af} + g_{af,eb} - g_{ab,ef} - g_{ef,ab})
+ \frac{1}{4} g^{fe} g^{mn} (
	- g_{bn,a} g_{em,f} 
	+ g_{fn,a} g_{em,b} 
	+ g_{fn,a} g_{bm,e}
	- g_{bn,a} g_{fm,e}
	- g_{fn,a} g_{be,m}
	+ g_{bn,a} g_{fe,m}
	+ g_{an,f} g_{em,b} 
	+ g_{an,f} g_{bm,e}
	- g_{em,f} g_{an,b} 
	- g_{an,f} g_{be,m}
	+ g_{em,f} g_{ab,n}
	- g_{an,b} g_{fm,e}
	- g_{em,b} g_{af,n}
	+ g_{an,b} g_{fe,m}
	+ g_{fm,e} g_{ab,n}
	- g_{bm,e} g_{af,n}
	- g_{ab,n} g_{fe,m}
	+ g_{af,n} g_{be,m}
)$<br>
$ = \frac{1}{2} g^{ef} (g_{be,af} + g_{af,be} - g_{ab,ef} - g_{ef,ab})
+ \frac{1}{4} g^{ef} g^{rs} (
	+ g_{er,a} g_{fs,b} 
	
	- 2 g_{be,a} g_{fr,s} 
	+ g_{be,a} g_{rs,f}
	
	- 2 g_{ae,b} g_{fr,s} 
	+ g_{ae,b} g_{rs,f}
	
	+ 2 g_{ab,r} g_{es,f}
	- g_{ab,r} g_{ef,s}
	
	+ 2 g_{ar,e} g_{bs,f}
	- 2 g_{ar,e} g_{bf,s}
	
)$<br>
<br>

Derivatives:<br>
$\frac{\partial R_{ab}}{\partial g_{ef}} = 
	2 ( \frac{\partial}{\partial x^{[c}} (\frac{\partial}{\partial g_{ef}} {\Gamma^c}_{b]a})
		+ \frac{\partial}{\partial g_{ef}} {\Gamma^c}_{d[c} {\Gamma^d}_{b]a}
		+ {\Gamma^c}_{d[c} \frac{\partial}{\partial g_{ef}} {\Gamma^d}_{b]a}
)$<br>
$ = -2 ( \frac{\partial}{\partial x^{[c}} (g^{ce} {\Gamma^f}_{b]a})
		+ g^{ce} {\Gamma^f}_{d[c} {\Gamma^d}_{b]a}
		+ {\Gamma^c}_{d[c} g^{de} {\Gamma^f}_{b]a}
)$<br>
$ = -2 ( \frac{\partial}{\partial x^{[c}} g^{ce} {\Gamma^f}_{b]a}
		+ g^{ce} \frac{\partial}{\partial x^{[c}} {\Gamma^f}_{b]a}
		+ g^{ce} {\Gamma^f}_{d[c} {\Gamma^d}_{b]a}
		+ {\Gamma^c}_{d[c} g^{de} {\Gamma^f}_{b]a}
)$<br>
$ = 2 ( g^{cg} \frac{\partial}{\partial x^{[c}} g_{gh} g^{he} {\Gamma^f}_{b]a}
		- g^{ce} \frac{\partial}{\partial x^{[c}} {\Gamma^f}_{b]a}
		- g^{ce} {\Gamma^f}_{d[c} {\Gamma^d}_{b]a}
		- {\Gamma^c}_{d[c} g^{de} {\Gamma^f}_{b]a}
)$<br>
getting rid of the $\frac{\partial}{\partial x^c} g_{ab}$...<br>
$ = 2 ( g^{cg} 2 \Gamma_{(gh)[c} g^{he} {\Gamma^f}_{b]a}
		- g^{ce} (
			\frac{\partial}{\partial x^{[c}} {\Gamma^f}_{b]a}
			+ {\Gamma^f}_{d[c} {\Gamma^d}_{b]a}
		)
		- {\Gamma^{ce}}_{[c} {\Gamma^f}_{b]a}
)$<br>
$ = 2 ( 2 {\Gamma^{(ce)}}_{[c} {\Gamma^f}_{b]a}
		- g^{ce} (
			\frac{\partial}{\partial x^{[c}} {\Gamma^f}_{b]a}
			+ {\Gamma^f}_{d[c} {\Gamma^d}_{b]a}
		)
		- {\Gamma^{ce}}_{[c} {\Gamma^f}_{b]a}
)$<br>
$ = 2 ( {\Gamma^{ec}}_{[c} {\Gamma^f}_{b]a}
		- g^{ce} (
			\frac{\partial}{\partial x^{[c}} {\Gamma^f}_{b]a}
			+ {\Gamma^f}_{d[c} {\Gamma^d}_{b]a}
		)
)$<br>
getting rid of the $\frac{\partial}{\partial x^d} {\Gamma^a}_{bc}$...<br>
$ = 2 {\Gamma^{ec}}_{[c} {\Gamma^f}_{b]a} - g^{ce} {R^f}_{acb}$<br>
<br>

Discretized:<br>
start with continuous definition:<br>
$R_{ab}(x) = 2 ( \frac{\partial}{\partial x^{[c}} {\Gamma^c}_{b]a}(x) + {\Gamma^c}_{d[c}(x) {\Gamma^d}_{b]a}(x) )$<br>
$ = 
	\frac{\partial}{\partial x^c} {\Gamma^c}_{ab}(x) 
	- \frac{\partial}{\partial x^b} {\Gamma^c}_{ac}(x) 
	+ {\Gamma^c}_{dc}(x) {\Gamma^d}_{ab}(x) 
	- {\Gamma^c}_{db}(x) {\Gamma^d}_{ac}(x) 
$<br>
separate out time derivatives (because I'm only discretizing in space):<br>
$= 
	+ \frac{\partial}{\partial x^t} {\Gamma^t}_{ab}(x) 
	+ \frac{\partial}{\partial x^k} {\Gamma^k}_{ab}(x) 
	- \frac{\partial}{\partial x^b} {\Gamma^t}_{at}(x) 
	- \frac{\partial}{\partial x^b} {\Gamma^k}_{ak}(x) 
	+ {\Gamma^c}_{dc}(x) {\Gamma^d}_{ab}(x) 
	- {\Gamma^c}_{db}(x) {\Gamma^d}_{ac}(x) 
$<br>
...but then shouldn't I also be separating out only the time derivatives of the discretized derivatives of the connection coefficients?...<br>
...in fact, I never defined the time derivatives of the discretized derivatives of the connection coefficients.  This is the first they've come into play...<br>
Since the indexes of the Ricci show up in the derivatives of the connections, I think I'll define them separately...<br>
<br>
$R_{tt}(x) = 
	  \frac{\partial}{\partial x^t} {\Gamma^t}_{tt}(x) 
	+ \frac{\partial}{\partial x^k} {\Gamma^k}_{tt}(x) 
	- \frac{\partial}{\partial x^t} {\Gamma^t}_{tt}(x) 
	- \frac{\partial}{\partial x^t} {\Gamma^k}_{tk}(x) 
	+ {\Gamma^c}_{dc}(x) {\Gamma^d}_{tt}(x) 
	- {\Gamma^c}_{dt}(x) {\Gamma^d}_{tc}(x) 
$<br>
$R_{it}(x) = R_{ti}(x) = 
	  \frac{\partial}{\partial x^t} {\Gamma^t}_{ti}(x) 
	+ \frac{\partial}{\partial x^k} {\Gamma^k}_{ti}(x) 
	- \frac{\partial}{\partial x^i} {\Gamma^t}_{tt}(x) 
	- \frac{\partial}{\partial x^i} {\Gamma^k}_{tk}(x) 
	+ {\Gamma^c}_{dc}(x) {\Gamma^d}_{ti}(x) 
	- {\Gamma^c}_{di}(x) {\Gamma^d}_{tc}(x) 
$<br>
$R_{ij}(x) = 
	  \frac{\partial}{\partial x^t} {\Gamma^t}_{ij}(x) 
	+ \frac{\partial}{\partial x^k} {\Gamma^k}_{ij}(x) 
	- \frac{\partial}{\partial x^j} {\Gamma^t}_{it}(x) 
	- \frac{\partial}{\partial x^j} {\Gamma^k}_{ik}(x) 
	+ {\Gamma^c}_{dc}(x) {\Gamma^d}_{ij}(x) 
	- {\Gamma^c}_{dj}(x) {\Gamma^d}_{ic}(x) 
$<br>

...<br>
<br>

$= 
	\frac{\partial}{\partial x^t}{\Gamma^t}_{ab}(x)
	+ \frac{ {\Gamma^j}_{ba}(x + \Delta \hat{x}^j) - {\Gamma^j}_{ba}(x - \Delta \hat{x}^j)}{ 2 \Delta }
	- \frac{\partial}{\partial x^b} {\Gamma^t}_{at}(x) 
	- \frac{ {\Gamma^c}_{ca}(x + \Delta \hat{x}^b) - {\Gamma^c}_{ca}(x - \Delta \hat{x}^b)}{ 2 \Delta }
	+ 2 {\Gamma^c}_{d[c} (x) {\Gamma^d}_{b]a} (x)
$<br>
$= \frac{1}{2 \Delta} \left( {\Gamma^c}_{ba}(x + \Delta \hat{x}^c) - {\Gamma^c}_{ba}(x - \Delta \hat{x}^c)
	- {\Gamma^c}_{ca}(x + \Delta \hat{x}^b) + {\Gamma^c}_{ca}(x - \Delta \hat{x}^b) \right)
	+ 2 {\Gamma^c}_{d[c} (x) {\Gamma^d}_{b]a} (x)
$<br>
Here I could use the simplified version to directly replace the 2nd derivatives of $g_{ab}$ with finite second derivatives, but the math gets more messy.  I might do that later.
Avoiding this causes the second derivative to use two separate samples from a 5-cell window rather than a 3-cell window.<br>
<br>

Discretized derivatives:<br>
$\frac{\partial R_{ab}(x)}{\partial g_{ef}(x)} 
= \frac{\partial}{\partial g_{ef}(x)} \frac{1}{2 \Delta} \left( {\Gamma^c}_{ba}(x + \Delta \hat{x}^c) - {\Gamma^c}_{ba}(x - \Delta \hat{x}^c)
	- {\Gamma^c}_{ca}(x + \Delta \hat{x}^b) + {\Gamma^c}_{ca}(x - \Delta \hat{x}^b) \right)
	+ {\Gamma^c}_{dc} (x) {\Gamma^d}_{ab} (x)
	- {\Gamma^c}_{db} (x) {\Gamma^d}_{ac} (x)
$<br>
$= \frac{1}{2 \Delta} \left( 
	  \frac{\partial}{\partial g_{ef}(x)} {\Gamma^c}_{ba}(x + \Delta \hat{x}^c) 
	- \frac{\partial}{\partial g_{ef}(x)} {\Gamma^c}_{ba}(x - \Delta \hat{x}^c)
	- \frac{\partial}{\partial g_{ef}(x)} {\Gamma^c}_{ca}(x + \Delta \hat{x}^b) 
	+ \frac{\partial}{\partial g_{ef}(x)} {\Gamma^c}_{ca}(x - \Delta \hat{x}^b) \right)
	+ \frac{\partial}{\partial g_{ef}(x)} {\Gamma^c}_{dc} (x) {\Gamma^d}_{ab} (x)
	+ {\Gamma^c}_{dc} (x) \frac{\partial}{\partial g_{ef}(x)} {\Gamma^d}_{ab} (x)
	- \frac{\partial}{\partial g_{ef}(x)} {\Gamma^c}_{db} (x) {\Gamma^d}_{ac} (x)
	- {\Gamma^c}_{db} (x) \frac{\partial}{\partial g_{ef}(x)} {\Gamma^d}_{ac} (x)
$<br>
$= \frac{1}{2 \Delta} 
	\left( 
		(	-\frac{1}{4} (
				g^{ce}(x + \Delta \hat{x}^c) (\delta^f_b \delta^c_a + \delta^f_a \delta^c_b) 
				- g^{cc}(x + \Delta \hat{x}^c) \delta^e_b \delta^f_a
			)
		)
		- (	
			\frac{1}{4} (
				g^{ce}(x - \Delta \hat{x}^c) (\delta^f_b \delta^c_a + \delta^f_a \delta^c_b) 
				- g^{cc}(x - \Delta \hat{x}^c) \delta^e_b \delta^f_a
			)
		) - (
			-\frac{1}{4} (
				g^{ce}(x + \Delta \hat{x}^b) (\delta^f_c \delta^b_a + \delta^f_a \delta^b_c) 
				- g^{cb}(x + \Delta \hat{x}^b) \delta^e_c \delta^f_a
			)
		) + (
			\frac{1}{4} (
				g^{ce}(x - \Delta \hat{x}^b) (\delta^f_c \delta^b_a + \delta^f_a \delta^b_c) 
				- g^{cb}(x - \Delta \hat{x}^b) \delta^e_c \delta^f_a
			)
		)
	\right)
	+ {\Gamma^d}_{ab} (x) (
		-g^{ce}(x) {\Gamma^f}_{dc}(x)
	) 
	+ {\Gamma^c}_{dc} (x) (
		-g^{de}(x) {\Gamma^f}_{ab}(x)
	)
	- {\Gamma^d}_{ac} (x) (
		-g^{ce}(x) {\Gamma^f}_{db}(x)
	) 
	- {\Gamma^c}_{db} (x) (
		-g^{de}(x) {\Gamma^f}_{ac}(x)
	)
$<br>
$= \frac{1}{8 \Delta} 
	\left( 
		- g^{ce}(x + \Delta \hat{x}^c) (\delta^f_b \delta^c_a + \delta^f_a \delta^c_b) + g^{cc}(x + \Delta \hat{x}^c) \delta^e_b \delta^f_a
		- g^{ce}(x - \Delta \hat{x}^c) (\delta^f_b \delta^c_a + \delta^f_a \delta^c_b) + g^{cc}(x - \Delta \hat{x}^c) \delta^e_b \delta^f_a
		+ g^{ce}(x + \Delta \hat{x}^b) (\delta^f_c \delta^b_a + \delta^f_a \delta^b_c) - g^{cb}(x + \Delta \hat{x}^b) \delta^e_c \delta^f_a
		+ g^{ce}(x - \Delta \hat{x}^b) (\delta^f_c \delta^b_a + \delta^f_a \delta^b_c) - g^{cb}(x - \Delta \hat{x}^b) \delta^e_c \delta^f_a
	\right)
	- {\Gamma^d}_{ab} (x) g^{ce}(x) {\Gamma^f}_{dc}(x) - {\Gamma^c}_{dc} (x) g^{de}(x) {\Gamma^f}_{ab}(x)
	+ {\Gamma^d}_{ac} (x) g^{ce}(x) {\Gamma^f}_{db}(x) + {\Gamma^c}_{db} (x) g^{de}(x) {\Gamma^f}_{ac}(x)
$<br>
$= \frac{1}{8 \Delta} 
	\left( 
		- g^{ce}(x + \Delta \hat{x}^c) \delta^f_b \delta^c_a 
		- g^{ce}(x + \Delta \hat{x}^c) \delta^f_a \delta^c_b
		+ g^{cc}(x + \Delta \hat{x}^c) \delta^e_b \delta^f_a
		- g^{ce}(x - \Delta \hat{x}^c) \delta^f_b \delta^c_a 
		- g^{ce}(x - \Delta \hat{x}^c) \delta^f_a \delta^c_b
		+ g^{cc}(x - \Delta \hat{x}^c) \delta^e_b \delta^f_a
		+ g^{ce}(x + \Delta \hat{x}^b) \delta^f_c \delta^b_a 
		+ g^{ce}(x + \Delta \hat{x}^b) \delta^f_a \delta^b_c
		- g^{cb}(x + \Delta \hat{x}^b) \delta^e_c \delta^f_a
		+ g^{ce}(x - \Delta \hat{x}^b) \delta^f_c \delta^b_a 
		+ g^{ce}(x - \Delta \hat{x}^b) \delta^f_a \delta^b_c
		- g^{cb}(x - \Delta \hat{x}^b) \delta^e_c \delta^f_a
	\right)
	- {\Gamma^d}_{ab} (x) g^{ce}(x) {\Gamma^f}_{dc}(x) 
	- {\Gamma^c}_{dc} (x) g^{de}(x) {\Gamma^f}_{ab}(x)
	+ {\Gamma^d}_{ac} (x) g^{ce}(x) {\Gamma^f}_{db}(x) 
	+ {\Gamma^c}_{db} (x) g^{de}(x) {\Gamma^f}_{ac}(x)
$<br>

<br>

<b>Gaussian curvature:</b><br>
$R = g^{ab} R_{ab}$<br>
<br>
Expanded:<br>
$R = \frac{1}{2} g^{ab} g^{cd} (g_{bc,ad} + g_{ad,bc} - g_{ab,cd} - g_{cd,ab})
+ \frac{1}{4} g^{ab} g^{cd} g^{ef} (
	+ g_{ce,a} g_{df,b} 
	
	- 2 g_{bc,a} g_{de,f} 
	+ g_{bc,a} g_{ef,d}
	
	- 2 g_{ac,b} g_{de,f} 
	+ g_{ac,b} g_{ef,d}
	
	+ 2 g_{ab,e} g_{cf,d}
	- g_{ab,e} g_{cd,f}
	
	+ 2 g_{ae,c} g_{bf,d}
	- 2 g_{ae,c} g_{bd,f}
)$<br>
$ = g^{ab} g^{cd} (g_{ac,bd} - g_{ab,cd})
+ \frac{1}{4} g^{ab} g^{cd} g^{ef} (
	+ 2 g_{ab,e} g_{cf,d} 
	- 1 g_{ab,e} g_{cd,f}
	- 4 g_{ac,d} g_{be,f}
	+ 3 g_{ac,e} g_{bd,f}
	- 2 g_{ac,e} g_{bf,d}
)$<br>
<br>

<b>Einstein tensor / trace reversal of Ricci tensor:</b><br>

$G_{ab} = G_{ab}(g_{ab})$<br>
$G_{ab} = R_{ab} - \frac{1}{2} g_{ab} g^{cd} R_{cd}$<br>
<br>

Derivatives:<br>
$\frac{\partial G_{ab}}{\partial g_{ef}} =
	\frac{\partial R_{ab}}{\partial g_{ef}} 
	- \frac{1}{2} (
		\frac{\partial g_{ab}}{\partial g_{ef}} g^{cd} R_{cd}
		+ g_{ab} \frac{\partial g^{cd}}{\partial g_{ef}} R_{cd}
		+ g_{ab} g^{cd} \frac{\partial R_{cd}}{\partial g_{ef}}
	)$<br>
$= \frac{\partial R_{ab}}{\partial g_{ef}} 
	- \frac{1}{2} (
		\delta^e_a \delta^f_b R
		- g_{ab} R^{ef}
		+ g_{ab} g^{cd} \frac{\partial R_{cd}}{\partial g_{ef}}
)$<br>
$=  - \frac{1}{2} ( \delta^e_a \delta^f_b R - g_{ab} R^{ef} )
	+ (\delta^c_a \delta^d_b - \frac{1}{2} g_{ab} g^{cd}) \frac{\partial R_{cd}}{\partial g_{ef}}
$<br>
$=  - \frac{1}{2} ( \delta^e_a \delta^f_b R - g_{ab} R^{ef} )
	+ (\delta^c_a \delta^d_b - \frac{1}{2} g_{ab} g^{cd}) 

	\cdot 2 ( g^{mg} \frac{\partial}{\partial x^{[d}} g_{gh} g^{he} {\Gamma^f}_{m]c}
			- g^{me} \frac{\partial}{\partial x^{[d}} {\Gamma^f}_{m]c}
			- g^{me} {\Gamma^f}_{n[m} {\Gamma^n}_{d]c}
			- {\Gamma^m}_{n[m} g^{ne} {\Gamma^f}_{d]c}	)
$<br>
$=  - \frac{1}{2} ( \delta^e_a \delta^f_b R - g_{ab} R^{ef} )
	+ 2 ( g^{mg} \frac{\partial}{\partial x^{[b}} g_{gh} g^{he} {\Gamma^f}_{m]a}
			- g^{me} \frac{\partial}{\partial x^{[b}} {\Gamma^f}_{m]a}
			- g^{me} {\Gamma^f}_{n[m} {\Gamma^n}_{b]a}
			- {\Gamma^m}_{n[m} g^{ne} {\Gamma^f}_{b]a}	)
	
	- g_{ab} ( g^{mg} \frac{\partial}{\partial x^{[d}} g_{gh} g^{he} {\Gamma^f}_{m]c} g^{cd} 
			- g^{me} \frac{\partial}{\partial x^{[d}} {\Gamma^f}_{m]c} g^{cd} 
			- g^{me} {\Gamma^f}_{n[m} {\Gamma^n}_{d]c} g^{cd} 
			- {\Gamma^m}_{n[m} g^{ne} {\Gamma^f}_{d]c}g^{cd} )
$<br>
<br>

Discrete derivatives:<br>
$\frac{\partial}{\partial g_{pq}(x')} G_{ab}(x) = \frac{\partial}{\partial g_{pq}(x')} (R_{ab}(x) - \frac{1}{2} g_{ab}(x) g^{cd}(x) R_{cd}(x))$<br>

$= \frac{\partial}{\partial g_{pq}(x')}R_{ab}(x) - \frac{1}{2} (\frac{\partial}{\partial g_{pq}(x')} g_{ab}(x) g^{cd}(x) R_{cd}(x) + g_{ab}(x) \frac{\partial}{\partial g_{pq}(x')} g^{cd}(x) R_{cd}(x) + g_{ab}(x) g^{cd}(x) \frac{\partial}{\partial g_{pq}(x')} R_{cd}(x))$<br>

$= \frac{\partial}{\partial g_{pq}(x')}R_{ab}(x) - \frac{1}{2} (\delta^a_p \delta^b_q \delta(x-x') R(x) - g_{ab}(x) g^{ce}(x) \frac{\partial}{\partial g_{pq}(x')} g_{ef}(x) g^{fd}(x) R_{cd}(x) + g_{ab}(x) g^{cd}(x) \frac{\partial}{\partial g_{pq}(x')} R_{cd}(x))$<br>

$= \frac{\partial}{\partial g_{pq}(x')}R_{ab}(x) - \frac{1}{2}\delta^p_a \delta^q_b \delta(x-x') R(x) + \frac{1}{2} g_{ab}(x) g^{ce}(x) \delta^p_e \delta^q_f \delta(x-x') g^{fd}(x) R_{cd}(x) - \frac{1}{2} g_{ab}(x) g^{cd}(x) \frac{\partial}{\partial g_{pq}(x')} R_{cd}(x)$<br>

$= \frac{\partial}{\partial g_{pq}(x')}R_{ab}(x) - \frac{1}{2}\delta^p_a \delta^q_b \delta(x-x') R(x) + \frac{1}{2} \delta(x-x') g_{ab}(x) g^{pc}(x) R_{cd}(x) g^{dq}(x) - \frac{1}{2} g_{ab}(x) g^{cd}(x) \frac{\partial}{\partial g_{pq}(x')} R_{cd}(x)$<br>
<br>

<b>Stress-energy tensor:</b><br>
$T_{ab} = T_{ab}(g_{ab}, \rho, P, e_{int},  v^i, E^i, B^i, ...)$<br>
$T_{ab} = T^{EM}_{ab} + T^{matter}_{ab} + ...$<br>
<br>

<b>Electromagnetism stress-energy:</b><br>
$T^{EM}_{ab} = \frac{1}{8\pi} \downarrow a(i) \overset{\rightarrow b(j)}{ \left[\matrix{
	g_{mn} (E^m E^n + B^m B^n) & -2 \epsilon_{tjmn} E^m B^n \\
	-2 \epsilon_{timn} E^m B^n & (g_{ij} g_{mn} - 2 g_{im} g_{jn}) (E^m  E^n + B^m B^n)
}\right]}$<br>
<br>
Derivatives:<br>
$\frac{\partial}{\partial g_{ef}} T^{EM}_{ab}
= \frac{1}{8\pi} \downarrow a(i) \overset{\rightarrow b(j)}{ \left[\matrix{
	E^e E^f + B^e B^f & -2 \frac{\partial \epsilon_{tjmn}}{\partial g_{ef}} E^m B^n \\
	-2 \frac{\partial \epsilon_{timn}}{\partial g_{ef}} E^m B^n &
		(\delta^e_i \delta^f_j g_{mn}
		+ g_{ij} \delta^e_m \delta^f_n
		- 2 \delta^e_i \delta^f_m g_{jn}
		- 2 g_{im} \delta^e_j \delta^f_n)
	(E^m  E^n + B^m B^n)
}\right]}$<br>
$ = \frac{1}{8\pi} \downarrow a(i) \overset{\rightarrow b(j)}{ \left[\matrix{
	E^e E^f + B^e B^f & -2 \frac{\partial \epsilon_{tjmn}}{\partial g_{ef}} E^m B^n \\
	-2 \frac{\partial \epsilon_{timn}}{\partial g_{ef}} E^m B^n &
	\delta^e_i \delta^f_j g_{mn} (E^m E^n + B^m B^n)
	+ g_{ij} (E^e  E^f + B^e B^f)
	- 2 \delta^e_i g_{jn} (E^f  E^n + B^f B^n)
	- 2 g_{im} \delta^e_j (E^m  E^f + B^m B^f)
}\right]}$<br>
$ = \frac{1}{8\pi} \downarrow a(i) \overset{\rightarrow b(j)}{ \left[\matrix{
	E^e E^f + B^e B^f & -\sqrt{-g} g^{fe} \bar\epsilon_{tjmn} E^m B^n \\
	-\sqrt{-g} g^{fe} \bar\epsilon_{timn} E^m B^n &
	\delta^e_i \delta^f_j g_{mn} (E^m E^n + B^m B^n)
	+ g_{ij} (E^e  E^f + B^e B^f)
	- 2 \delta^e_i g_{jn} (E^f  E^n + B^f B^n)
	- 2 g_{im} \delta^e_j (E^m  E^f + B^m B^f)
}\right]}$<br>
<br>

<b>Matter stress-energy:</b><br>
$T^{matter}_{ab} = u_a u_b (\rho (1 + e_{int}) + P) + g_{ab} P$<br>
<br>
Derivatives:<br>
$\frac{\partial}{\partial g_{ef}} T^{matter}_{ab}
= (
	\frac{\partial}{\partial g_{ef}} u_a u_b
	+ u_a \frac{\partial}{\partial g_{ef}} u_b
) (\rho (1 + e_{int}) + P) 
+ \frac{\partial}{\partial g_{ef}} g_{ab} P
$<br>
$= (\delta^e_a u_b + \delta^e_b u_a ) u^f (\rho (1 + e_{int}) + P) 
	+ \delta^e_a \delta^f_b P
$<br>
<br>

<b>Einstein Field Equations:</b><br>
$G_{ab} = 8 \pi T_{ab}$<br>
<br>

<b>Constraint function:</b><br>
$\Phi = \frac{1}{2} \underset{ab}\Sigma (G_{ab} - 8 \pi T_{ab})^2$<br>
<br>

Derivatives:<br>
$\frac{\partial \Phi}{\partial G_{ab}} = \frac{1}{2} \underset{cd}\Sigma \left[ 2 (G_{cd} - 8 \pi T_{cd}) \right] \cdot \frac{\partial G_{cd}}{\partial G_{ab}}$<br>
$ = \frac{1}{2} \underset{cd}\Sigma \left[ 2 (G_{cd} - 8 \pi T_{cd}) \right] \cdot \delta^a_c \delta^b_d$<br>
$ = G_{ab} - 8 \pi T_{ab}$<br>
<br>

$\frac{\partial \Phi}{\partial T_{ab}} = \frac{1}{2} \underset{cd}\Sigma \left[ 2 (G_{cd} - 8 \pi T_{cd}) \right] \cdot -8 \pi \frac{\partial T_{cd}}{\partial T_{ab}}$<br> 
$ = \frac{1}{2} \underset{cd}\Sigma \left[ 2 (G_{cd} - 8 \pi T_{cd}) \right] \cdot -8 \pi \delta^a_c \delta^b_d$<br> 
$ = -8 \pi (G_{ab} - 8 \pi T_{ab})$<br> 
<br>

$\frac{\partial \Phi}{\partial g_{pq}} = 
	\frac{\partial \Phi}{\partial G_{ab}} 
	\frac{\partial G_{ab}}{\partial g_{pq}}
	+ \frac{\partial \Phi}{\partial T_{ab}}
	\frac{\partial T_{ab}}{\partial g_{pq}}$<br>
$ = (G_{ab} - 8 \pi T_{ab}) \left(
	\frac{\partial G_{ab}}{\partial g_{pq}}
		-8 \pi \frac{\partial T_{ab}}{\partial g_{pq}}
	\right)$<br>
<br>

Discretized:<br>
$\Phi = \frac{1}{2} \underset{a,b,x}\Sigma (G_{ab}(x) - 8 \pi T_{ab}(x))^2$<br>
<br>

Discrete derivatives of $\Phi$:<br>
$\frac{\partial \Phi}{\partial g_{pq}(x')} 
= \frac{\partial}{\partial g_{pq}(x')} \frac{1}{2} \underset{a,b,x}\Sigma (G_{ab} (x) - 8 \pi T_{ab}(x))^2$<br>
$= \underset{a,b,x}\Sigma (G_{ab} (x) - 8 \pi T_{ab}(x)) ( \frac{\partial}{\partial g_{pq}(x')} G_{ab} (x) - 8 \pi \frac{\partial}{\partial g_{pq}(x')} T_{ab} (x))$<br>
<br>

Derivatives of continuous $\Phi$ wrt $\alpha, \beta^i, \gamma_{ij}$:<br>
$\frac{\partial \Phi}{\partial \alpha} 
= \frac{\partial \Phi}{\partial g_{pq}} \frac{\partial g_{pq}}{\partial \alpha}
= -2 \alpha \frac{\partial \Phi}{\partial g_{tt}}
$<br>
<br>

$\frac{\partial \Phi}{\partial \beta^m}
= \frac{\partial \Phi}{\partial g_{pq}} \frac{\partial g_{pq}}{\partial \beta^m}
$<br>
$ = p(i)\downarrow \overset{q(j)\rightarrow}{\left[\matrix{
	\frac{\partial \Phi}{\partial g_{tt}} &
		\frac{\partial \Phi}{\partial g_{tj}} \\
	\frac{\partial \Phi}{\partial g_{it}} &
		\frac{\partial \Phi}{\partial g_{ij}}
}\right]} 
\cdot p(i)\downarrow \overset{q(j)\rightarrow}{\left[ \matrix{ 
	2 \beta_m & \gamma_{mj} \\ \gamma_{mi} & 0
} \right]}$<br>
$ = 2 \frac{\partial \Phi}{\partial g_{tt}} \beta_m
	+ 2 \frac{\partial \Phi}{\partial g_{ti}} \gamma_{im}
$<br>
<br>

$\frac{\partial \Phi}{\partial \gamma_{mn}}
= \frac{\partial \Phi}{\partial g_{pq}} \frac{\partial g_{pq}}{\partial \gamma_{mn}}
$<br>
$ = p(i)\downarrow \overset{q(j)\rightarrow}{\left[\matrix{
	\frac{\partial \Phi}{\partial g_{tt}} &
		\frac{\partial \Phi}{\partial g_{tj}} \\
	\frac{\partial \Phi}{\partial g_{it}} &
		\frac{\partial \Phi}{\partial g_{ij}}
}\right]} 
\cdot p(i)\downarrow \overset{q(j)\rightarrow}{\left[ \matrix{ 
	\beta^m \beta^n & \beta^m \delta^j_n \\ \beta^m \delta^n_i & \delta^m_i \delta^n_j
} \right]}$<br>
$ = \frac{\partial \Phi}{\partial g_{tt}} \beta^m \beta^n
	+ 2 \frac{\partial \Phi}{\partial g_{tn}} \beta^m
	+ \frac{\partial \Phi}{\partial g_{mn}}
$<br>
</body>
</html>
